webpackJsonp([3],{GjP0:function(t,e){},lmfZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),n=a.n(s),o=a("Dd8w"),i=a.n(o),c=a("mtWM"),r=a.n(c),l=a("NYxO"),d={name:"Login",data:function(){return{active:0,username:"",phone:"",password:"",emsgp:"",emsgpw:"",checked:!0,vifcode:"",sccode:""}},computed:i()({},Object(l.c)(["sname"])),mounted:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");t.indexOf("password")>-1&&(t=JSON.parse(t),this.username=t.name,this.password=t.password)}},methods:i()({},Object(l.b)(["loginm"]),{phonevif:function(){0==this.phone.length?this.$toast("请输入手机号"):/^1[3456789]\d{9}$/.test(this.phone)?this.emsgp="":(this.emsgp="手机号格式不正确",this.$toast("手机号格式不正确,请重新输入"),this.phone="")},chinese:function(){this.$toast("用户名不能包含中文，格式为数字、字母或者下划线")},getcode:function(){var t=this;""==this.phone?this.$toast("请输入手机号"):r()({url:"http://106.13.26.54:8080/isExist",params:{phone:this.phone}}).then(function(e){if(1==e.data.code){var a=parseInt(1e5*(9*Math.random()+1));t.sccode=a,t.$notify({message:a,duration:3e3,background:"#1989fa"}),t.$store.commit("loginm",{id:e.data.data.id,name:e.data.data.account})}else t.$toast("该手机号还未注册！请先注册"),t.active=0})},codevif:function(){this.vifcode!=this.sccode&&(this.$toast("验证码输入错误,请重新获取或重新输入"),this.vifcode="")},loginp:function(){if(""==this.phone)this.$toast("请输入手机号");else if(""==this.codevif)this.$toast("请输入验证码");else{var t={name:this.$store.state.sname,id:this.$store.state.userid};localStorage.setItem("token",n()(t)),this.$router.push("/index")}},login:function(){var t=this;r()({url:"http://106.13.26.54:8080/login",params:{account:this.username,password:this.password}}).then(function(e){if(console.log(e),1==e.data.code){t.$store.commit("loginm",{id:e.data.data.id,name:e.data.data.account});var a={name:e.data.data.account,id:e.data.data.id};t.checked&&(a.password=t.password),localStorage.setItem("token",n()(a)),t.$router.push("/index")}else t.$toast("用户名或密码错误")}).catch(function(e){console.log(e),t.$toast("用户名或密码错误"),t.username="",t.password=""})},regist:function(){var t=this;""!=this.username&&""!=this.password?r()({url:"http://106.13.26.54:8080/insertUser",params:{account:this.username,password:this.password}}).then(function(e){if(console.log(e),console.log(e.data),1==e.data.code){var a={name:e.data.data.account,id:e.data.data.id};t.checked&&(a.password=t.password),localStorage.setItem("token",n()(a)),t.$toast("注册成功！！！请点击登陆");var s=t;setTimeout(function(){s.$router.push("/login")},2e3)}else t.$toast("用户名已存在"),t.username="",t.password=""}).catch(function(e){console.log(e),t.$toast("服务器错误"),t.username="",t.password=""}):this.$toast("请输入注册信息")}})},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-row",{attrs:{type:"flex",justify:"center"}},[a("van-col",[a("van-image",{attrs:{width:"100vw",fit:"contain",src:"http://img0.imgtn.bdimg.com/it/u=1263615210,733703364&fm=26&gp=0.jpg"}})],1)],1),t._v(" "),a("div",{staticClass:"inner"},[a("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"账号登录"}},[a("van-cell-group",[a("van-field",{attrs:{label:"账号",placeholder:"请输入用户名"},on:{change:function(e){return t.chinese()}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码","error-message":t.emsgpw},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("van-row",{staticStyle:{"font-size":"12px"}},[a("van-col",{attrs:{span:"8",offset:"3"}},[a("van-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("记住密码")])],1),t._v(" "),a("van-col",{attrs:{span:"8",offset:"2"}},[a("router-link",{attrs:{to:"/xiugaimima"}},[t._v("忘记密码？")])],1)],1),t._v(" "),a("van-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center"}},[a("van-col",{attrs:{span:"8"}},[a("van-button",{attrs:{round:"",type:"primary",size:"small"},on:{click:t.login}},[t._v("登录")])],1),t._v(" "),a("van-col",{attrs:{span:"8"}},[a("van-button",{attrs:{round:"",type:"info",size:"small"},on:{click:t.regist}},[t._v("注册")])],1)],1)],1),t._v(" "),a("van-tab",{attrs:{title:"手机号登录"}},[a("van-cell-group",[a("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号","error-message":t.emsgp,autofocus:""},on:{change:t.phonevif},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}},[a("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.getcode},slot:"button"},[t._v("发送验证码")])],1),t._v(" "),a("van-field",{attrs:{center:"",clearable:"",label:"验证码",placeholder:"请输入验证码"},on:{change:t.codevif},model:{value:t.vifcode,callback:function(e){t.vifcode=e},expression:"vifcode"}})],1),t._v(" "),a("van-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center"}},[a("van-col",{attrs:{span:"8"}},[a("van-button",{attrs:{round:"",type:"primary",size:"small"},on:{click:t.loginp}},[t._v("登录")])],1)],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"60px"}},[a("van-row",{attrs:{type:"flex",justify:"center"}},[a("van-col",[a("van-icon",{attrs:{name:"umbrella-circle",size:"35px"}})],1),t._v(" "),a("van-col",[a("van-icon",{attrs:{name:"umbrella-circle",size:"35px"}})],1),t._v(" "),a("van-col",[a("van-icon",{attrs:{name:"umbrella-circle",size:"35px"}})],1)],1),t._v(" "),a("van-row",{staticStyle:{"font-size":"12px"},attrs:{type:"flex",justify:"center"}},[a("van-col",[t._v("登录即代表同意我们的服务协议和隐私政策")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(t){a("GjP0")},"data-v-7d60519b",null);e.default=u.exports},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var s=a("FeBl"),n=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}}});
//# sourceMappingURL=3.14eed02e8ae4d21f81a3.js.map